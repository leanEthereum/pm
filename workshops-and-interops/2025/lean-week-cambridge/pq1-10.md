# pq1-10: PQ P2P Aggregation

## Categories
- PQ-devnet
- PQ-theory

## Related Talks
- [pq1-09](pq1-09.md): PQ Devnet Updates
- [pq1-14](pq1-14.md): Devnet Specs (workshop)
- [pq1-15](pq1-15.md): P2P Performance
- [pq2-10](pq2-10.md): Devnet Breakout (p2p)
- [pq3-05](pq3-05.md): Lean p2p

## Summary
Kamil Salakhiev from the Qlean lean client team discussed P2P challenges for post-quantum (PQ) XMSS signature aggregation in Ethereum's lean consensus, with 3KB sigs and 4s slots requiring sub-4s collection/aggregation from 8000+ validators. He proposed subnet division for local (stage 1) and global (stage 2) aggregation, targeting 1000 sigs/s and 10 SNARKs/s, with theoretical min times ~2s (ignoring latency/duplicates). Bottlenecks include validator bandwidth and SNARK speed. Simulations via Bencim compared GossipSub (1.5 duplicates/sig) vs. Grid topology (structured, <1 duplicate, 2-hop max, but requires address exposure/punishment). Future: Bandwidth to 200Mbps (1.6s total), GPU for 10k sigs/s (0.83s). Integration with 3SF: Propose/vote/fast-confirm/aggregate phases need P2P for cross-subnet sig observation. Alternatives: No subnets (download supermajority in 0.62s + aggregate rest, needs GPU); large aggregator subnet for parallel spread/aggregation. Conclusions: Increase bandwidth, accelerate processing, integrate structured topologies like Grid.

## Key Takeaways
- **PQ Challenges**: 3KB XMSS sigs + 4s slots demand <4s aggregation from 8000 validators; subnets for local/global stages, but latency/duplicates add overhead.
- **Time Breakdown**: Local download 0.43s + agg 0.9s; global 0.12s + 0.6s; total ~2s min, but real-world higher due to hops/latency.
- **Bottlenecks**: Bandwidth (15Mbps limit) and SNARK creation; future 200Mbps + GPU (10k sigs/s) could drop to 0.83s.
- **Bencim Simulations**: GossipSub (random, 1.5 duplicates) vs. Grid (structured, <1 duplicate); Grid better utilizes higher bandwidth but needs address exposure mechanisms.
- **3SF Integration**: Validators need cross-subnet sig visibility for fast-confirm; P2P design must enable observation without full aggregation by slot end.
- **Alternatives**: No subnets (0.62s download + GPU agg); large aggregator subnet for efficient spread (parallel 0.62s + 0.83s).
- **Q&A**: Current Ethereum uses GossipSub (~128 subnets, 2-layer BLS agg); Braida Chainweb integrable into simulator; EPID/choke improvements minor (~10%), insufficient for PQ scale.

## Speakers
- Kamil Salakhiev (Qlean (lean client))

## Resources
- [Slides](https://docs.google.com/presentation/d/1n6FtypB3bffwuvAfwL43XrENln_gOVKieFJpVu9_4H0/edit?usp=drive_link)
- [Bencim Simulator Report](#) (not publicly linked; internal simulation tool for topologies/assumptions)
- [Qlean Repo](https://github.com/qdrvm/qlean-mini): C++ lean client with P2P research
- [Video](https://youtu.be/USMXvf4CbEE)

> back to: [Index Page](index.md)

*Note: Summaries were generated in part with the help of AI, so names and terms may not be 100% accurate.*