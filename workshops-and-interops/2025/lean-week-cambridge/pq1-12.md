# pq1-12: WHIR Performance

## Categories
- PQ-theory
- PQ-implementation

## Related Talks
- [pq1-03](pq1-03.md): Hash-based zkSNARKs
- [pq1-13](pq1-13.md): WHIR Performance (workshop)
- [pq2-02](pq2-02.md): The ethSTARK Toy Problem
- [pq3-04](pq3-04.md): Updates on Poseidon

## Summary
Thomas Coratger from the Ethereum Foundation's zkEVM team detailed the WHIR PCS implementation in Rust, structured across folders for constraints (managing equality/evaluation checks over multilinear polynomials), prover (proof generation round-by-round), verifier (fast verification), committer (Merkle trees), sumcheck (single/skip variants), poly (coeffs/evals/multilinear/wavelet), fiat_shamir (transcripts), and dft (evaluation-domain ops). Constraints transform to eval_eq polynomials for sumcheck. Key optimizations/open problems: Primitive enhancements, univariate skip/Bagad sumcheck, parallelization/SIMD strategies, 'Select' trick to eliminate eval DFTs, Fiat-Shamir/Plonky3 compatibility, batch opening, and WHIR 2.0 ideas. Discussion: Bottlenecks (CPU/memory; measure cache misses), FFT opts (cache-aware L1/L2, bit reversal 30% gain, transposition 10x), non-AIR constraints. Q&A emphasized CPU dominance but potential memory issues; cache opts for FFT/transposition.

## Key Takeaways
- **Core Structure**: Modular Rust repo (constraints/prover/verifier/etc.); multilinear focus; eval-domain ops to avoid DFT conversions.
- **Polynomial Reps**: Coeffs/evals/multilinear/wavelet; DFT for eval domain; wavelet for transforms.
- **Constraint System**: Initializes statements; adds unevaluated constraints; combines to single multilinear for sumcheck (e.g., Rust example).
- **Sumcheck Module**: Single/skip variants; critical for PCS/PIOP/STARK (25% cost); optimize with univariate skip/Bagad.
- **Optimizations/Open Problems**: Primitives/sumcheck/parallelization/SIMD/'Select' trick/Fiat-Shamir/batch opening/Plonky3 integration/WHIR 2.0.
- **Discussion**: CPU bottlenecks; investigate memory/cache misses; FFT opts (bit reversal/transposition); eval domain to skip DFTs.
- **Q&A**: Benchmarks show CPU-heavy; cache opts untried but promising (30% bit reversal, 10x transposition).

## Speakers
- [Thomas Coratger](https://x.com/tcoratger) (EF - zkEVM)

## Resources
- [Slides](https://drive.google.com/file/d/11YGf2pbAAGOD4CVIfmNMquLnDpT7hEaX/view?usp=drive_link)
- [WHIR Repo](https://github.com/tcoratger/whir-p3/tree/main/src): WHIR PCS impl; planned Plonky3 upstream.
- ePrint: [WHIR: Reedâ€“Solomon Proximity Testing with Super-Fast Verification](https://eprint.iacr.org/2024/1586)
- [Plonky3 Repo](https://github.com/Plonky3/Plonky3): Integration target.
- [Video](https://youtu.be/cXimFnlUiWs)

> back to: [Index Page](index.md)

*Note: Summaries were generated in part with the help of AI, so names and terms may not be 100% accurate.*